# 三大规范驱动开发工具：最佳实践汇总对比

> **研究日期**: 2024-12-20
> **研究目的**: 提取核心最佳实践，为 SoloDevFlow 2.0 提供借鉴

---

## 一、工具概览对比

| 维度 | cc-sdd | GitHub Spec-Kit | claude-code-spec-workflow |
|------|--------|-----------------|---------------------------|
| **开发者** | gotalab (日本) | GitHub 官方 | Pimzino |
| **Star 数** | 2.1k+ | 官方项目 | 3.2k+ |
| **支持 AI 工具** | 7 种 | 15+ 种 | Claude Code → MCP 版支持多种 |
| **核心理念** | Kiro 风格 SDD | 规范即一等公民 | Spec 作为单一事实来源 |
| **状态管理** | spec.json 状态机 | 文件分散 | Steering + Spec 分层 |
| **安装方式** | npx 一键安装 | specify init | npm 安装 |

---

## 二、核心架构对比

### 2.1 目录结构对比

```
┌─────────────────────────────────────────────────────────────────────┐
│                           cc-sdd                                     │
├─────────────────────────────────────────────────────────────────────┤
│ .kiro/                                                               │
│ ├── steering/          # 项目记忆（product/tech/structure）          │
│ ├── specs/<feature>/   # 功能规格（11个文档文件）                     │
│ └── settings/          # 模板和规则                                  │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│                        GitHub Spec-Kit                               │
├─────────────────────────────────────────────────────────────────────┤
│ .specify/                                                            │
│ ├── memory/            # Constitution（项目宪法）                    │
│ ├── specs/NNN-name/    # 功能规格（spec/plan/tasks + Phase 文档）    │
│ └── templates/         # 文档模板                                    │
└─────────────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────────────┐
│                   claude-code-spec-workflow                          │
├─────────────────────────────────────────────────────────────────────┤
│ .claude/                                                             │
│ ├── steering/          # 持久化上下文（product/tech/structure）      │
│ ├── specs/<name>/      # 功能规格（requirements/design/tasks）       │
│ ├── bugs/<name>/       # Bug 工作流                                 │
│ └── templates/         # 文档模板                                    │
└─────────────────────────────────────────────────────────────────────┘
```

### 2.2 工作流对比

| 阶段 | cc-sdd | GitHub Spec-Kit | claude-code-spec-workflow |
|------|--------|-----------------|---------------------------|
| **初始化** | steering | constitution | steering-setup |
| **需求** | spec-requirements | specify | spec-create |
| **消歧** | - | clarify | - |
| **设计** | spec-design | plan | (自动生成) |
| **验证** | validate-gap/design | analyze/checklist | - |
| **任务** | spec-tasks | tasks | (自动分解) |
| **实现** | spec-impl | implement | spec-execute |

### 2.3 状态管理对比

| 工具 | 状态载体 | 状态结构 | 跨 Session |
|------|----------|----------|------------|
| **cc-sdd** | spec.json | 阶段 + 审批 + 任务进度 | 文件持久化 |
| **Spec-Kit** | 文件分散 | 无集中状态 | 依赖 Git |
| **spec-workflow** | Steering 文档 | 分层上下文 | Session 缓存 + 文件 |
| **SoloDevFlow** | state.json | 阶段 + 状态 + 迭代 | 文件持久化 |

---

## 三、核心机制对比

### 3.1 项目记忆系统

| 工具 | 机制名称 | 文件结构 | 特点 |
|------|----------|----------|------|
| **cc-sdd** | Steering System | product.md + tech.md + structure.md | 三维记忆模型 |
| **Spec-Kit** | Constitution | constitution.md | 项目宪法（不可变原则） |
| **spec-workflow** | Steering Documents | product.md + tech.md + structure.md | 三层上下文 + Token 优化 |

**最佳实践总结**：
1. **三维分离**：产品愿景、技术栈、项目结构分开管理
2. **持久化**：跨 Session 保持一致性
3. **自动生成**：AI 分析现有代码库生成初始记忆

### 3.2 需求格式

| 工具 | 格式 | 示例 |
|------|------|------|
| **cc-sdd** | EARS 语法 | WHEN user enters valid credentials THEN system authenticates |
| **Spec-Kit** | Given-When-Then | Given [前置条件], when [操作], then [期望结果] |
| **spec-workflow** | EARS 格式 | IF user forgets password WHEN user requests reset THEN system sends link |

**最佳实践总结**：
1. **结构化需求**：消除歧义，AI 易理解
2. **可测试**：验收标准可直接转化为测试用例
3. **技术中立**：需求文档不提及具体技术

### 3.3 任务分解

| 工具 | 编号系统 | 并行标记 | TDD 支持 |
|------|----------|----------|----------|
| **cc-sdd** | 无固定格式 | 依赖关系 | 支持 |
| **Spec-Kit** | T001, T002... | [P] 标记 | 强制 |
| **spec-workflow** | 自动生成 | 依赖关系 | 支持 |

**最佳实践总结**：
1. **原子化**：每个任务 < 200 行代码
2. **依赖声明**：明确任务依赖关系
3. **TDD 优先**：测试任务先于实现任务
4. **可回滚**：每个任务独立 Commit

### 3.4 Token 优化

| 工具 | 机制 | 效果 |
|------|------|------|
| **cc-sdd** | 无 | - |
| **Spec-Kit** | 无 | - |
| **spec-workflow** | 三级优化命令 + Session 缓存 | 60-80% Token 节省 |

**spec-workflow 的三级优化**：
1. `get-steering-context`：批量加载全局上下文
2. `get-spec-context`：批量加载规格文档
3. `get-template-context`：批量加载模板

### 3.5 质量门控

| 工具 | 验证命令 | 检查内容 |
|------|----------|----------|
| **cc-sdd** | validate-gap/design/impl | 需求差异、设计兼容、实现一致性 |
| **Spec-Kit** | analyze, checklist | 跨文档一致性、领域检查清单 |
| **spec-workflow** | Validator Agents（可选） | 需求/设计/任务校验 |

**最佳实践总结**：
1. **每阶段验证**：需求→设计→实现都需检查
2. **人工审批**：关键节点必须人类确认
3. **自动化辅助**：工具辅助发现问题

---

## 四、最佳实践精华提取

### 4.1 必须采纳的实践

| 实践 | 来源 | 价值 | SoloDevFlow 适配 |
|------|------|------|------------------|
| **项目记忆系统** | cc-sdd + spec-workflow | 解决 AI 跨会话遗忘 | 新增 `.flow/memory/` |
| **EARS 格式需求** | cc-sdd + spec-workflow | 消除需求歧义 | 更新 PRD 模板 |
| **任务原子化** | Spec-Kit | 可回滚、可验证 | 增加 tasks.md |
| **模型选择策略** | spec-workflow | 降低 API 成本 | 更新 CLAUDE.md |
| **Mermaid 架构图** | spec-workflow | 设计可视化 | 设计阶段强制输出 |

### 4.2 推荐采纳的实践

| 实践 | 来源 | 价值 | SoloDevFlow 适配 |
|------|------|------|------------------|
| **Constitution 机制** | Spec-Kit | 定义不可变原则 | 新增 `.flow/constitution.md` |
| **Token 优化** | spec-workflow | 减少 Token 消耗 | `npm run load-context` |
| **质量门控** | cc-sdd + Spec-Kit | 自动化验证 | `npm run validate:*` |
| **TDD 强制** | Spec-Kit | 测试先行 | 任务模板包含测试 |
| **文档分离** | Spec-Kit | 职责清晰 | PRD + 设计 + 数据模型分离 |

### 4.3 暂不采纳的实践

| 实践 | 来源 | 不采纳原因 |
|------|------|-----------|
| **多 AI 工具支持** | cc-sdd + Spec-Kit | 维护成本高，SoloDevFlow 专注 Claude Code |
| **复杂命令系统** | cc-sdd (11个) + Spec-Kit (8个) | SoloDevFlow 理念是自然语言 + AI 引导 |
| **Sub-Agent 架构** | spec-workflow | 增加复杂度，违背"人主导"理念 |
| **分支编号系统** | Spec-Kit | 多人协作冲突 |
| **过细的规范文档** | cc-sdd (11个文档) | 个人开发者难以维护 |

---

## 五、SoloDevFlow 改进路线图

### 5.1 立即行动（低成本、高收益）

| 改进项 | 来源 | 实现方式 | 预期效果 |
|--------|------|----------|----------|
| **EARS 格式需求** | cc-sdd + spec-workflow | 更新迭代 PRD 模板 | 需求更可测试 |
| **Mermaid 架构图** | spec-workflow | 设计阶段强制输出 | 设计评审更高效 |
| **模型选择策略** | spec-workflow | 更新 CLAUDE.md（Opus 生成、Sonnet 实现） | 降低 30%+ API 成本 |

### 5.2 短期规划（迭代2）

| 改进项 | 来源 | 实现方式 | 预期效果 |
|--------|------|----------|----------|
| **项目记忆系统** | cc-sdd + spec-workflow | 新增 `.flow/memory/` 目录 | 解决跨 Session 遗忘 |
| **任务分解模板** | Spec-Kit | 设计阶段输出 tasks.md | 实现阶段有明确路径 |
| **Token 优化** | spec-workflow | `npm run load-context` | 减少 50%+ 重复读取 |

### 5.3 中期规划（迭代3）

| 改进项 | 来源 | 实现方式 | 预期效果 |
|--------|------|----------|----------|
| **Constitution 机制** | Spec-Kit | 新增 `.flow/constitution.md` | 定义不可变原则 |
| **质量门控** | cc-sdd + Spec-Kit | `npm run validate:*` 命令 | 自动化验证 |
| **文档分离** | Spec-Kit | PRD + 设计 + 数据模型分离 | 职责清晰 |

### 5.4 长期探索（迭代4+）

| 改进项 | 来源 | 实现方式 | 预期效果 |
|--------|------|----------|----------|
| **Validator Agent** | spec-workflow | 仅校验，不执行 | 自动化审查 |
| **可视化 Dashboard** | spec-workflow MCP 版 | Web 界面 | 进度可视化 |
| **Brownfield 工作流** | cc-sdd | 项目类型标识 + validate-gap | 既有项目支持 |

---

## 六、核心差异与定位

### 6.1 Philosophy 对比

| 维度 | cc-sdd | Spec-Kit | spec-workflow | SoloDevFlow |
|------|--------|----------|---------------|-------------|
| **核心隐喻** | "Kiro 风格 SDD" | "规范即宪法" | "Spec 作为 SSOT" | "流程是护栏" |
| **优化重点** | 跨工具统一 | 结构化规范 | Token 效率 | 人类认知负担 |
| **适用人群** | 多工具用户 | 团队开发 | 效率优化者 | 超级个体 |
| **自动化程度** | 中 | 中 | 高 | 中（人主导） |

### 6.2 SoloDevFlow 的差异化优势

| 维度 | SoloDevFlow 独有 | 其他工具缺失 |
|------|------------------|--------------|
| **灵光捕获** | spark-box.md | 全部缺失 |
| **输入日志** | input-log.md | 全部缺失 |
| **文档债务** | pending-docs.md | 全部缺失 |
| **影响分析** | 变更前强制分析 | 依赖 AI 自觉 |
| **回退机制** | 明确回退规则 | 不明确 |
| **总分输出** | 认知友好结构 | 无规范 |

### 6.3 融合建议

**取其精华**：
- cc-sdd：项目记忆系统（三维模型）
- Spec-Kit：Constitution + 任务原子化
- spec-workflow：Token 优化 + 模型选择

**保持特色**：
- 灵光捕获机制
- 输入日志追溯
- 总分结构输出
- 回退明确性
- 人主导决策

**最终形态**：
```
SoloDevFlow 3.0 =
  SoloDevFlow 2.0（人性化协作）
  + 项目记忆系统（cc-sdd/spec-workflow）
  + Constitution 机制（Spec-Kit）
  + Token 优化（spec-workflow）
  + 任务原子化（Spec-Kit）
  - 过度复杂性（保持轻量）
```

---

## 七、关键链接汇总

### cc-sdd
- [GitHub - gotalab/cc-sdd](https://github.com/gotalab/cc-sdd)
- [AWS: AI-Driven Development Life Cycle](https://aws.amazon.com/blogs/devops/ai-driven-development-life-cycle/)
- [Kiro Best Practices](https://kiro.dev/docs/specs/best-practices/)

### GitHub Spec-Kit
- [GitHub - github/spec-kit](https://github.com/github/spec-kit)
- [GitHub Blog: Spec-Driven Development with AI](https://github.blog/ai-and-ml/generative-ai/spec-driven-development-with-ai-get-started-with-a-new-open-source-toolkit/)
- [Martin Fowler: Understanding SDD](https://martinfowler.com/articles/exploring-gen-ai/sdd-3-tools.html)

### claude-code-spec-workflow
- [GitHub - Pimzino/claude-code-spec-workflow](https://github.com/Pimzino/claude-code-spec-workflow)
- [GitHub - Pimzino/spec-workflow-mcp](https://github.com/Pimzino/spec-workflow-mcp)（MCP 版本，推荐）
- [Beyond the Hype: Deep Dive](https://skywork.ai/skypage/en/pimzino-spec-workflow-mcp-server/1978716587922411520)

---

## 八、结论

### 8.1 核心洞察

1. **规范驱动是趋势**：三个工具都强调"先规范后代码"
2. **项目记忆是刚需**：解决 AI 跨会话遗忘问题
3. **人类审批是保障**：关键节点必须人类确认
4. **适度自动化**：过度自动化增加复杂度

### 8.2 SoloDevFlow 的路径

**保持核心**：
- 人主导决策
- 灵光捕获
- 影响分析
- 总分输出

**借鉴补强**：
- 项目记忆系统
- EARS 格式需求
- 任务原子化
- Token 优化

**避免陷阱**：
- 过度复杂的命令系统
- 过多的规范文档
- 高度自动化

---

**报告完成时间**：2024-12-20
**版本**：v1.0
**研究者**：Claude Opus 4.5（协助 SoloDevFlow 2.0 项目）
