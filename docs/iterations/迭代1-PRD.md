# 迭代1 - PRD

> 核心流程可用

---

## 一、迭代目标

**让核心流程跑通**：引入最基础的脚本 (npm scripts) 配合 AI 执行，降低纯手动操作的繁琐度，确保流程可落地。

---

## 二、功能范围

### 2.1 输入日志机制

**目的**：捕获人类所有关键输入，不丢失决策依据

**功能**：
- AI 判断输入是否为"关键输入"
- 关键输入记录到 `.flow/input-log.md`
- 记录格式：时间、原文、类型、阶段、归纳

**验收标准**：
- [ ] 人类的需求/决策/反馈/变更都被记录
- [ ] 可追溯任何决策的原始依据

### 2.2 灵光收集箱

**目的**：捕获灵光一闪，不打断当前流程

**功能**：
- AI 识别"灵光"（与当前任务无关的想法）
- 记录到 `.flow/spark-box.md`
- 告知人类已记录，继续当前任务
- 阶段结束时回顾待处理灵光

**验收标准**：
- [ ] 灵光不打断当前任务
- [ ] 灵光不丢失
- [ ] 有机制处理待处理灵光

### 2.3 流程上下文

**目的**：AI 始终知道当前阶段，主动引导

**功能**：
- AI 维护当前阶段、当前任务
- 人类输入与阶段不符时，AI 主动引导
- 提供切换选项：立即处理 or 记录灵光

**验收标准**：
- [ ] AI 能说出"当前在XX阶段"
- [ ] AI 不直接响应字面需求，先判断是否符合阶段
- [ ] 提供明确的引导和选项

### 2.4 分层状态

**目的**：人类可读 + AI 可用

**功能**：
- 摘要层：`.flow/status.md`（人类看）
- 详情层：`.flow/state.json`（AI用）
- 状态更新时同步两层

**验收标准**：
- [ ] 人类看 status.md 能快速了解全局
- [ ] AI 用 state.json 能获取详细信息
- [ ] 两层保持同步
- [ ] (新增) 提供 `npm run status` 快速查看状态
- [ ] (新增) 提供 `npm run log` 快速记录输入

---

## 三、不包含（迭代2+）

- 复杂的 IDE 插件
- 全自动化的 CI/CD 流水线

---

## 四、依赖

无外部依赖，纯流程规范 + 手动执行

---

## 五、验收标准（整体）

- [ ] 用此流程完成迭代1本身的开发
- [ ] 过程中人类输入被记录
- [ ] 灵光不丢失
- [ ] AI 按流程引导
- [ ] 状态可读可追溯

---

*版本：v0.1*
